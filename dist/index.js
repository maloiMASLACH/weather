(()=>{"use strict";const e={"Light rain":"rain_light","Light rain shower":"snow","Light sleet":"snow","Light snow":"snow","Heavy snow":"snow","Moderate or heavy sleet":"snow","Moderate or heavy rain shower":"rain_huge","Light drizzle":"rain_light","Moderate rain":"rain_huge","Partly cloudy":"sun_cloud",Clear:"sunny",Sunny:"sunny",Overcast:"cloud",Fog:"cloud",Cloudy:"cloud",Mist:"cloud","Patchy rain possible":"rain_light","Moderate snow":"snow","Blowing snow":"snow",Blizzard:"snow","Light snow showers":"rain_light","Patchy snow possible":"snow","Patchy heavy snow":"snow","Patchy light rain":"rain_light","Moderate rain at times":"rain_light","Patchy light drizzle":"rain_light"};class t{slide(e){e.addEventListener("mousewheel",(t=>{const n=window.event||t,c=Math.max(-1,Math.min(1,n.wheelDelta||-n.detail));e.scrollLeft-=10*c,setTimeout((()=>{e.scrollLeft-=10*c}),10),setTimeout((()=>{e.scrollLeft-=10*c}),20),setTimeout((()=>{e.scrollLeft-=10*c}),30),setTimeout((()=>{e.scrollLeft-=10*c}),40),n.preventDefault()}),!1)}clockBlocks(t){const n=document.createElement("div");n.className="forecast";for(let c=t.location.localtime.split(" ")[1].split(":")[0];c<24;c++){const r=document.createElement("div");r.className="clockForecast",r.style.transform="translateX(0px)","F"===localStorage.getItem("degrees")?r.textContent=`${t.forecast.forecastday[0].hour[c].temp_f}°F`:r.textContent=`${t.forecast.forecastday[0].hour[c].temp_c}°C`;const o=document.createElement("p");let s;o.textContent=`${t.forecast.forecastday[0].hour[c].time.split(" ")[1]}`,s=o.textContent.split(":")[0]<=t.forecast.forecastday[0].astro.sunrise.split(":")[0]||o.textContent.split(":")[0]>+t.forecast.forecastday[0].astro.sunset.split(":")[0]+12?"night":"day";const a=document.createElement("img");a.src=`./light/${s}/${e[t.forecast.forecastday[0].hour[c].condition.text]}.png`,a.style.width="70%",r.append(a,o),n.append(r)}for(let c=1;c<t.forecast.forecastday.length;c++)for(let r=0;r<24;r++){const o=document.createElement("div");o.className="clockForecast","F"===localStorage.getItem("degrees")?o.textContent=`${t.forecast.forecastday[c].hour[r].temp_f}°F`:o.textContent=`${t.forecast.forecastday[c].hour[r].temp_c}°C`;const s=document.createElement("p");let a;s.textContent=`${t.forecast.forecastday[c].hour[r].time.split(" ")[1]}`,a=s.textContent.split(":")[0]<=t.forecast.forecastday[c].astro.sunrise.split(":")[0]||s.textContent.split(":")[0]>+t.forecast.forecastday[c].astro.sunset.split(":")[0]+12?"night":"day";const i=document.createElement("img");i.src=`./light/${a}/${e[t.forecast.forecastday[c].hour[r].condition.text]}.png`,i.style.width="70%",o.append(i,s),n.append(o)}return this.slide(n),n}slider(e){const t=document.createElement("div");t.className="slider";const n=document.createElement("img");n.src="./light/arrow.png",n.style.transform="scaleX(-1)",n.className="arrow";const c=document.createElement("img");c.src="./light/arrow.png",c.className="arrow";const r=this.clockBlocks(e,n,c);return t.append(n,r,c),t}render(e,t){const n=this.slider(t);e.append(n)}}class n{currentLocation(e){const t=document.createElement("div"),n=document.createElement("p");n.classList="currentSity",n.textContent=e.location.name;const c=document.createElement("p");return c.classList="currentCountry",c.textContent=e.location.country,t.append(n,c),t}currenWetherIcon(t){const n=document.createElement("img");return n.className="icon",n.src=`./light/${localStorage.getItem("dayPart")}/${e[t.current.condition.text]}.png`,n}currentTemp(e){const t=document.createElement("div");t.classList="currentTemp";const n=document.createElement("p");n.classList="tempNumber";const c=document.createElement("p");return c.classList="currentDegrees","F"===localStorage.getItem("degrees")?(n.textContent=`${e.current.temp_f}`,c.textContent="°F"):(n.textContent=`${e.current.temp_c}`,c.textContent="°C"),t.append(n,c),t}currentCondition(e){const t=document.createElement("p");return t.textContent=e.current.condition.text,t.classList="condition",t}currentDate(e){const t=document.createElement("div");t.classList="currentTimer";const n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=document.createElement("p");c.textContent=`${(new Date).getDate()}th ${n[(new Date).getMonth()]} '${(new Date).getUTCFullYear().toString().slice(-2)}`,c.classList="currentDay";const r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=document.createElement("p");return o.textContent=`${r[(new Date).getDay()]}   |   ${e.location.localtime.split(" ")[1].split(":")[0]} : ${`0${(new Date).getMinutes().toString()}`.slice(-2)}\n    `,o.classList="currentDay",t.append(c,o),setInterval((()=>{o.textContent.split(":")[1].slice(1,3)!==(new Date).getUTCMinutes()&&(c.textContent=`${(new Date).getDate()}th ${n[(new Date).getMonth()]} '${(new Date).getUTCFullYear().toString().slice(-2)}`,o.textContent=`${r[(new Date).getDay()]}   |   ${e.location.localtime.split(" ")[1].split(":")[0]} : ${`0${(new Date).getMinutes().toString()}`.slice(-2)}\n        `)}),1e3),t}switcher(){const e=document.createElement("div");e.className="switcher";const t=document.createElement("input");t.type="checkbox",t.id="switch","F"===localStorage.getItem("degrees")&&(t.checked=!0),t.onclick=()=>{t.checked&&localStorage.setItem("degrees","F"),t.checked||localStorage.setItem("degrees","C")};const n=document.createElement("label");return n.setAttribute("for",t.id),n.textContent="C F",e.append(t,n),e}firstBlock(e){const t=document.createElement("div"),n=this.currenWetherIcon(e),c=this.currentLocation(e),r=this.currentTemp(e),o=this.currentDate(e);return t.append(n,c,r,o),t}shortInfoLine(e){const t=document.createElement("div");t.className="shortInfoLine";const n=[`Wind ${e.current.wind_kph} km/h`,`Hum ${e.current.humidity} %`,`Rain ${e.forecast.forecastday[0].day.daily_chance_of_rain} %`];for(let e=0;e<3;e++){const c=document.createElement("img");c.src=`./light/icon_${e}.png`;const r=document.createElement("p");r.textContent=n[e],t.append(c,r)}return t}reRenderBlock(e,n){e.children[0].children[0].innerHTML="",e.children[2].children[1].innerHTML="";const c=this.firstBlock(n),r=(new t).clockBlocks(n);e.children[2].children[1].append(r),e.children[0].children[0].append(c)}leftBlock(e,t){const n=document.createElement("div");n.className="leftBlockFirstLay";const c=this.firstBlock(t),r=this.switcher();n.append(c,r);const o=document.createElement("div");o.className="leftBlockSecondLay";const s=this.shortInfoLine(t);o.append(s),e.append(n,o),r.onchange=()=>{this.reRenderBlock(e,t)}}}const c={day:" linear-gradient(248.66deg, #FF9696 0%, #8C6BAE 100%)",night:" linear-gradient(248.66deg, #48355B 0%, #8C6EAB 100%)"},r=class{constructor(e,t){this.conteiner=document.createElement("div"),this.conteiner.id=e,this.conteiner.info=t}createPage(){const e=document.createElement("div");return e.className="content",e.style.width="100%",e.style.height="100%",console.log(c[localStorage.getItem("dayPart")]),document.body.style.background=c[localStorage.getItem("dayPart")],this.conteiner.style.height="91vh",e}render(){return this.conteiner}},o=class{getWhatINeed(e){return fetch(`https://api.weatherapi.com/v1/forecast.json?key=01960bba4b6a444a831133935212311&q=${e}&days=3&aqi=yes&alerts=yes`).then((e=>e.json()))}sityAPI(e){return fetch(`https://autocomplete.travelpayouts.com/places2?term=${e}&locale=en&types[]=city`).then((e=>e.json()))}async showAll(e){return await this.getWhatINeed(e)}async sityes(e){return await this.sityAPI(e)}};class s{async renderHelpBlocks(e,t,n){const r=await(new o).sityes(e);console.log(r);const s=document.createElement("div");if(s.style.background=c[localStorage.getItem("dayPart")],r.length)for(let e=0;e<r.length;e++){if(e<5){const t=document.createElement("p");t.textContent=r[e].name,t.addEventListener("click",(()=>{n.value=t.textContent})),s.append(t)}t.innerHTML="",t.append(s)}else t.innerHTML="";document.addEventListener("click",(()=>{t.innerHTML=""}))}inputBlock(){const e=document.createElement("div");e.className="inputdiv";const t=document.createElement("input");t.className="searchPanel";const n=document.createElement("div");n.className="helpBloks",t.addEventListener("keyup",(e=>{"Enter"===e.code&&(localStorage.setItem("sity",t.value),(new p).renderNewPAge("Home")),this.renderHelpBlocks(t.value,n,t)}));const c=document.createElement("img");return c.src="./light/search.png",c.addEventListener("click",(()=>{localStorage.setItem("sity",t.value),(new p).renderNewPAge("Home")})),e.append(t,c,n),e}clocks(e){const t=document.createElement("canvas"),n=t.getContext("2d"),c=t.width/2.4,r=t.height/2;return n.beginPath(),n.strokeStyle="#E0E0E0",n.lineWidth="8",n.moveTo(c,r),n.lineTo(c+50*Math.cos((30*e.split(":")[0]-90)*Math.PI/180),r+50*Math.sin((30*e.split(":")[0]-90)*Math.PI/180)),n.stroke(),n.beginPath(),n.strokeStyle="black",n.lineWidth="6",n.moveTo(c,r),n.lineTo(c+60*Math.cos((e.split(":")[1].split(" ")[0]/60*360-90)*Math.PI/180),r+50*Math.sin((e.split(":")[1].split(" ")[0]/60*360-90)*Math.PI/180)),n.stroke(),t}clocksBlock(e){const t=["Sunrise","Last Update","Sunset"],n=[e.forecast.forecastday[0].astro.sunrise.split(" ")[0],e.current.last_updated.split(" ")[1],e.forecast.forecastday[0].astro.sunset.split(" ")[0]],c=document.createElement("div");c.className="allClocks";for(let e=0;e<3;e++){const r=document.createElement("div");r.className="clockBlock";const o=document.createElement("p");o.className="dayEvent",o.textContent=t[e];const s=this.clocks(n[e]),a=document.createElement("div");a.className="clock";const i=document.createElement("p");i.textContent=n[e],a.append(s,i),r.append(o,a),c.append(r)}return c}renderIndexCanvas(e){const t=["rgba(255, 255, 255, 0.24)","rgba(172, 142, 255, 0.78)","rgba(152, 116, 255, 0.83)","rgba(134, 92, 253, 0.85)"," #713FFD"],n=document.createElement("canvas"),c=n.getContext("2d");n.style.width="100%",t.forEach((e=>{c.beginPath(),c.lineWidth=5;const n=1+.2*t.indexOf(e),r=1+.2*(t.indexOf(e)+1);c.arc(150,155,125,Math.PI*n,Math.PI*r,!1),c.strokeStyle=e,c.stroke()}));const r=1+.2*e;return c.lineWidth=20,c.beginPath(),c.arc(150,155,125,Math.PI*r-.05,Math.PI*r+.05,!1),c.strokeStyle="white",c.stroke(),n}indexesBlock(e){const t=document.createElement("div");t.className="indexes";const n=["Air Quality","UV Index"],c=[e.current.air_quality["us-epa-index"],Math.round(e.current.uv/2)],r=["Low","Moderate","Medium","Height","Extream"];return n.forEach((e=>{const o=document.createElement("div");o.className="index";const s=document.createElement("p");s.textContent=e;const a=this.renderIndexCanvas(c[n.indexOf(e)]),i=document.createElement("p");i.textContent=`${c[n.indexOf(e)]}/5 ${r[c[n.indexOf(e)]-1]}`,o.append(s,a,i),t.append(o)})),t}render(e,t){const n=this.inputBlock(t),c=this.clocksBlock(t),r=this.indexesBlock(t);return e.append(n,c,r),e}}const a={color:"rgba(0,222,0,.5)",background:"linear-gradient(248.66deg, #FF9696 0%, #8C6BAE 100%)"},i={color:"rgba(0,222,0,.5)",background:" linear-gradient(248.66deg, #91BEF3 0%,rgb(98 113 169) 50%, #91BEF3 100%)"},l={color:"rgba(0,222,0,.5)",background:"linear-gradient(90.66deg, #AAC0FF 0%, #8C6BAE 100%)"},d={404:"Error. Bad URl"},u={Home:class extends r{constructor(e,t){super(e,t)}TwoMainBlocks(){const e=document.createElement("div");e.className="leftBlock";const r=document.createElement("div");r.className="rightBlock",r.style.background=c[localStorage.getItem("dayPart")],(new n).leftBlock(e,this.conteiner.info),(new t).render(e,this.conteiner.info),(new s).render(r,this.conteiner.info),this.conteiner.firstChild.append(e,r)}render(){const e=this.createPage(a);return this.conteiner.append(e),this.TwoMainBlocks(),this.conteiner}},Settings:class extends r{constructor(e){super(e)}render(){const e=this.createPage(i);return this.conteiner.append(e),this.conteiner}},Favorite:class extends r{constructor(e){super(e)}render(){const e=this.createPage(l);return this.conteiner.append(e),this.conteiner}},Error:class extends r{constructor(e,t){super(e),this.errType=t}render(){const e=this.createPage(d[this.errType]);return this.conteiner.append(e),this.conteiner}}};class h extends class{constructor(e,t){this.conteiner=document.createElement(e),this.conteiner.className=t}render(){return this.conteiner}}{constructor(e,t){super(e,t)}renderButtons(){const e=document.createElement("div");Object.keys(u).slice(0,Object.keys(u).length-1).forEach((t=>{const n=document.createElement("a");n.href=`#${t}`,n.text=`${t}`,e.append(n)})),this.conteiner.append(e)}checkWidth(){document.documentElement.clientWidth<=425&&(this.conteiner.style.background=c[localStorage.getItem("dayPart")]),window.addEventListener("resize",(()=>{document.documentElement.clientWidth<=425?this.conteiner.style.background=c[localStorage.getItem("dayPart")]:this.conteiner.style.background=""}))}render(){return this.renderButtons(),this.checkWidth(),this.conteiner}}const m=document.body,p=class{constructor(){this.initialPage=new u.Home("Home"),this.menu=new h("header","menu")}async renderNewPAge(e){const t=document.querySelector("#current-page");t&&t.remove();let n=null;const c=await(new o).showAll(localStorage.getItem("sity")||"Minsk");console.log(c),c.location.localtime.split(" ")[1].split(":")[0]<c.forecast.forecastday[0].astro.sunrise.split(":")[0]||c.location.localtime.split(" ")[1].split(":")[0]>=+c.forecast.forecastday[0].astro.sunset.split(":")[0]+12?localStorage.setItem("dayPart","night"):localStorage.setItem("dayPart","day");try{n=new u[e](e,c)}catch(t){n=new u.Error(e,"404")}if(n){const e=n.render();e.id="current-page",m.append(e)}}routChage(){window.addEventListener("hashchange",(()=>{const e=window.location.hash.slice(1);this.renderNewPAge(e)}))}async run(){if(m.append(this.menu.render()),window.location.hash.length){const e=window.location.hash.slice(1);this.renderNewPAge(e)}else this.renderNewPAge("Home");this.routChage()}};(new p).run()})();